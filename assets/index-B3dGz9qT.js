(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))d(u);new MutationObserver(u=>{for(const i of u)if(i.type==="childList")for(const v of i.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&d(v)}).observe(document,{childList:!0,subtree:!0});function a(u){const i={};return u.integrity&&(i.integrity=u.integrity),u.referrerPolicy&&(i.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?i.credentials="include":u.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function d(u){if(u.ep)return;u.ep=!0;const i=a(u);fetch(u.href,i)}})();class De{grid=Array(16).fill(null);score=0;bestScore=0;playerName="Player";tileCounter=0;celebratedTiles=new Set;difficulty="easy";constructor(){this.loadScores()}loadScores(){const r=localStorage.getItem("2048-best-score");if(r){const a=JSON.parse(r);this.bestScore=a.score,this.playerName=a.name}}saveScores(){localStorage.setItem("2048-best-score",JSON.stringify({score:this.bestScore,name:this.playerName}))}saveState(){localStorage.setItem("2048-game-state",JSON.stringify({grid:this.grid,score:this.score,tileCounter:this.tileCounter,celebratedTiles:Array.from(this.celebratedTiles),isOver:this.isGameOver(),difficulty:this.difficulty}))}loadState(){const r=localStorage.getItem("2048-game-state");if(r){const a=JSON.parse(r);return a.isOver?(localStorage.removeItem("2048-game-state"),!1):(this.grid=a.grid,this.score=a.score,this.tileCounter=a.tileCounter,this.celebratedTiles=new Set(a.celebratedTiles||[]),this.difficulty=a.difficulty||"easy",!0)}return!1}init(r=!0,a){r&&this.loadState()||(a&&(this.difficulty=a),this.reset())}reset(){this.grid=Array(16).fill(null),this.score=0,this.celebratedTiles=new Set,this.addTile(),this.addTile(),this.saveState()}addTile(){const r=this.grid.map((a,d)=>a===null?d:null).filter(a=>a!==null);if(r.length>0){const a=r[Math.floor(Math.random()*r.length)],d=Math.max(...this.grid.map(i=>i?i.value:0));let u=2;if(this.difficulty==="easy"){const i=[2,4,8];d>=128&&i.push(16),u=i[Math.floor(Math.random()*i.length)]}else if(d>=16){const i=Math.log2(d)-2,v=[];for(let y=1;y<=i;y++){const S=Math.floor(200/Math.pow(2,y));for(let n=0;n<S;n++)v.push(y)}const L=v[Math.floor(Math.random()*v.length)];u=Math.pow(2,L)}else u=Math.random()<.9?2:4;this.grid[a]={value:u,id:this.tileCounter++,isNew:!0,isMerged:!1}}}isGameOver(){if(this.grid.some(a=>a===null))return!1;const r=4;for(let a=0;a<r;a++)for(let d=0;d<r;d++){const u=this.grid[a*r+d].value;if(d<r-1&&u===this.grid[a*r+d+1].value||a<r-1&&u===this.grid[(a+1)*r+d].value)return!1}return!0}move(r){let a=!1;const d=4;let u=Array(16).fill(null);const i=(v,L)=>v*d+L;if(r==="left"||r==="right")for(let v=0;v<d;v++){let L=[];for(let n=0;n<d;n++)L.push(this.grid[i(v,n)]);r==="right"&&L.reverse();let y=L.filter(n=>n!==null),S=[];for(let n=0;n<y.length;n++)if(n<y.length-1&&y[n].value===y[n+1].value){const w=y[n].value*2;S.push({value:w,id:y[n].id,isNew:!1,isMerged:!0}),this.score+=w,n++,a=!0}else y[n].isNew=!1,y[n].isMerged=!1,S.push(y[n]);for(;S.length<d;)S.push(null);r==="right"&&S.reverse();for(let n=0;n<d;n++)this.grid[i(v,n)]?.id!==S[n]?.id&&(a=!0),u[i(v,n)]=S[n]}else for(let v=0;v<d;v++){let L=[];for(let n=0;n<d;n++)L.push(this.grid[i(n,v)]);r==="down"&&L.reverse();let y=L.filter(n=>n!==null),S=[];for(let n=0;n<y.length;n++)if(n<y.length-1&&y[n].value===y[n+1].value){const w=y[n].value*2;S.push({value:w,id:y[n].id,isNew:!1,isMerged:!0}),this.score+=w,n++,a=!0}else y[n].isNew=!1,y[n].isMerged=!1,S.push(y[n]);for(;S.length<d;)S.push(null);r==="down"&&S.reverse();for(let n=0;n<d;n++)this.grid[i(n,v)]?.id!==S[n]?.id&&(a=!0),u[i(n,v)]=S[n]}return a&&(this.grid=u,this.addTile(),this.score>this.bestScore&&(this.bestScore=this.score,this.saveScores()),this.saveState()),a}getGrid(){return this.grid}getScore(){return this.score}getBestScore(){return this.bestScore}getPlayerName(){return this.playerName}getCelebratedTiles(){return this.celebratedTiles}getDifficulty(){return this.difficulty}setPlayerName(r){this.playerName=r,this.saveScores()}}var J={};(function c(r,a,d,u){var i=!!(r.Worker&&r.Blob&&r.Promise&&r.OffscreenCanvas&&r.OffscreenCanvasRenderingContext2D&&r.HTMLCanvasElement&&r.HTMLCanvasElement.prototype.transferControlToOffscreen&&r.URL&&r.URL.createObjectURL),v=typeof Path2D=="function"&&typeof DOMMatrix=="function",L=(function(){if(!r.OffscreenCanvas)return!1;try{var t=new OffscreenCanvas(1,1),e=t.getContext("2d");e.fillRect(0,0,1,1);var s=t.transferToImageBitmap();e.createPattern(s,"no-repeat")}catch{return!1}return!0})();function y(){}function S(t){var e=a.exports.Promise,s=e!==void 0?e:r.Promise;return typeof s=="function"?new s(t):(t(y,y),null)}var n=(function(t,e){return{transform:function(s){if(t)return s;if(e.has(s))return e.get(s);var l=new OffscreenCanvas(s.width,s.height),h=l.getContext("2d");return h.drawImage(s,0,0),e.set(s,l),l},clear:function(){e.clear()}}})(L,new Map),w=(function(){var t=Math.floor(16.666666666666668),e,s,l={},h=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(f){var m=Math.random();return l[m]=requestAnimationFrame(function o(g){h===g||h+t-1<g?(h=g,delete l[m],f()):l[m]=requestAnimationFrame(o)}),m},s=function(f){l[f]&&cancelAnimationFrame(l[f])}):(e=function(f){return setTimeout(f,t)},s=function(f){return clearTimeout(f)}),{frame:e,cancel:s}})(),U=(function(){var t,e,s={};function l(h){function f(m,o){h.postMessage({options:m||{},callback:o})}h.init=function(o){var g=o.transferControlToOffscreen();h.postMessage({canvas:g},[g])},h.fire=function(o,g,M){if(e)return f(o,null),e;var x=Math.random().toString(36).slice(2);return e=S(function(b){function I(C){C.data.callback===x&&(delete s[x],h.removeEventListener("message",I),e=null,n.clear(),M(),b())}h.addEventListener("message",I),f(o,x),s[x]=I.bind(null,{data:{callback:x}})}),e},h.reset=function(){h.postMessage({reset:!0});for(var o in s)s[o](),delete s[o]}}return function(){if(t)return t;if(!d&&i){var h=["var CONFETTI, SIZE = {}, module = {};","("+c.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{t=new Worker(URL.createObjectURL(new Blob([h])))}catch(f){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",f),null}l(t)}return t}})(),ue={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function he(t,e){return e?e(t):t}function fe(t){return t!=null}function T(t,e,s){return he(t&&fe(t[e])?t[e]:ue[e],s)}function me(t){return t<0?0:Math.floor(t)}function ge(t,e){return Math.floor(Math.random()*(e-t))+t}function j(t){return parseInt(t,16)}function ve(t){return t.map(pe)}function pe(t){var e=String(t).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:j(e.substring(0,2)),g:j(e.substring(2,4)),b:j(e.substring(4,6))}}function ye(t){var e=T(t,"origin",Object);return e.x=T(e,"x",Number),e.y=T(e,"y",Number),e}function we(t){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight}function Me(t){var e=t.getBoundingClientRect();t.width=e.width,t.height=e.height}function be(t){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=t,e}function Se(t,e,s,l,h,f,m,o,g){t.save(),t.translate(e,s),t.rotate(f),t.scale(l,h),t.arc(0,0,1,m,o,g),t.restore()}function xe(t){var e=t.angle*(Math.PI/180),s=t.spread*(Math.PI/180);return{x:t.x,y:t.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:t.startVelocity*.5+Math.random()*t.startVelocity,angle2D:-e+(.5*s-Math.random()*s),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:t.color,shape:t.shape,tick:0,totalTicks:t.ticks,decay:t.decay,drift:t.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:t.gravity*3,ovalScalar:.6,scalar:t.scalar,flat:t.flat}}function Ie(t,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var s=e.tick++/e.totalTicks,l=e.x+e.random*e.tiltCos,h=e.y+e.random*e.tiltSin,f=e.wobbleX+e.random*e.tiltCos,m=e.wobbleY+e.random*e.tiltSin;if(t.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-s)+")",t.beginPath(),v&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))t.fill(Ce(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(f-l)*.1,Math.abs(m-h)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var o=Math.PI/10*e.wobble,g=Math.abs(f-l)*.1,M=Math.abs(m-h)*.1,x=e.shape.bitmap.width*e.scalar,b=e.shape.bitmap.height*e.scalar,I=new DOMMatrix([Math.cos(o)*g,Math.sin(o)*g,-Math.sin(o)*M,Math.cos(o)*M,e.x,e.y]);I.multiplySelf(new DOMMatrix(e.shape.matrix));var C=t.createPattern(n.transform(e.shape.bitmap),"no-repeat");C.setTransform(I),t.globalAlpha=1-s,t.fillStyle=C,t.fillRect(e.x-x/2,e.y-b/2,x,b),t.globalAlpha=1}else if(e.shape==="circle")t.ellipse?t.ellipse(e.x,e.y,Math.abs(f-l)*e.ovalScalar,Math.abs(m-h)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):Se(t,e.x,e.y,Math.abs(f-l)*e.ovalScalar,Math.abs(m-h)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var p=Math.PI/2*3,O=4*e.scalar,P=8*e.scalar,N=e.x,k=e.y,F=5,B=Math.PI/F;F--;)N=e.x+Math.cos(p)*P,k=e.y+Math.sin(p)*P,t.lineTo(N,k),p+=B,N=e.x+Math.cos(p)*O,k=e.y+Math.sin(p)*O,t.lineTo(N,k),p+=B;else t.moveTo(Math.floor(e.x),Math.floor(e.y)),t.lineTo(Math.floor(e.wobbleX),Math.floor(h)),t.lineTo(Math.floor(f),Math.floor(m)),t.lineTo(Math.floor(l),Math.floor(e.wobbleY));return t.closePath(),t.fill(),e.tick<e.totalTicks}function Te(t,e,s,l,h){var f=e.slice(),m=t.getContext("2d"),o,g,M=S(function(x){function b(){o=g=null,m.clearRect(0,0,l.width,l.height),n.clear(),h(),x()}function I(){d&&!(l.width===u.width&&l.height===u.height)&&(l.width=t.width=u.width,l.height=t.height=u.height),!l.width&&!l.height&&(s(t),l.width=t.width,l.height=t.height),m.clearRect(0,0,l.width,l.height),f=f.filter(function(C){return Ie(m,C)}),f.length?o=w.frame(I):b()}o=w.frame(I),g=b});return{addFettis:function(x){return f=f.concat(x),M},canvas:t,promise:M,reset:function(){o&&w.cancel(o),g&&g()}}}function Y(t,e){var s=!t,l=!!T(e||{},"resize"),h=!1,f=T(e,"disableForReducedMotion",Boolean),m=i&&!!T(e||{},"useWorker"),o=m?U():null,g=s?we:Me,M=t&&o?!!t.__confetti_initialized:!1,x=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,b;function I(p,O,P){for(var N=T(p,"particleCount",me),k=T(p,"angle",Number),F=T(p,"spread",Number),B=T(p,"startVelocity",Number),Oe=T(p,"decay",Number),Pe=T(p,"gravity",Number),Ne=T(p,"drift",Number),Q=T(p,"colors",ve),Be=T(p,"ticks",Number),ee=T(p,"shapes"),ke=T(p,"scalar"),Ae=!!T(p,"flat"),te=ye(p),re=N,q=[],Fe=t.width*te.x,Re=t.height*te.y;re--;)q.push(xe({x:Fe,y:Re,angle:k,spread:F,startVelocity:B,color:Q[re%Q.length],shape:ee[ge(0,ee.length)],ticks:Be,decay:Oe,gravity:Pe,drift:Ne,scalar:ke,flat:Ae}));return b?b.addFettis(q):(b=Te(t,q,g,O,P),b.promise)}function C(p){var O=f||T(p,"disableForReducedMotion",Boolean),P=T(p,"zIndex",Number);if(O&&x)return S(function(B){B()});s&&b?t=b.canvas:s&&!t&&(t=be(P),document.body.appendChild(t)),l&&!M&&g(t);var N={width:t.width,height:t.height};o&&!M&&o.init(t),M=!0,o&&(t.__confetti_initialized=!0);function k(){if(o){var B={getBoundingClientRect:function(){if(!s)return t.getBoundingClientRect()}};g(B),o.postMessage({resize:{width:B.width,height:B.height}});return}N.width=N.height=null}function F(){b=null,l&&(h=!1,r.removeEventListener("resize",k)),s&&t&&(document.body.contains(t)&&document.body.removeChild(t),t=null,M=!1)}return l&&!h&&(h=!0,r.addEventListener("resize",k,!1)),o?o.fire(p,N,F):I(p,N,F)}return C.reset=function(){o&&o.reset(),b&&b.reset()},C}var V;function K(){return V||(V=Y(null,{useWorker:!0,resize:!0})),V}function Ce(t,e,s,l,h,f,m){var o=new Path2D(t),g=new Path2D;g.addPath(o,new DOMMatrix(e));var M=new Path2D;return M.addPath(g,new DOMMatrix([Math.cos(m)*h,Math.sin(m)*h,-Math.sin(m)*f,Math.cos(m)*f,s,l])),M}function Ee(t){if(!v)throw new Error("path confetti are not supported in this browser");var e,s;typeof t=="string"?e=t:(e=t.path,s=t.matrix);var l=new Path2D(e),h=document.createElement("canvas"),f=h.getContext("2d");if(!s){for(var m=1e3,o=m,g=m,M=0,x=0,b,I,C=0;C<m;C+=2)for(var p=0;p<m;p+=2)f.isPointInPath(l,C,p,"nonzero")&&(o=Math.min(o,C),g=Math.min(g,p),M=Math.max(M,C),x=Math.max(x,p));b=M-o,I=x-g;var O=10,P=Math.min(O/b,O/I);s=[P,0,0,P,-Math.round(b/2+o)*P,-Math.round(I/2+g)*P]}return{type:"path",path:e,matrix:s}}function Le(t){var e,s=1,l="#000000",h='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof t=="string"?e=t:(e=t.text,s="scalar"in t?t.scalar:s,h="fontFamily"in t?t.fontFamily:h,l="color"in t?t.color:l);var f=10*s,m=""+f+"px "+h,o=new OffscreenCanvas(f,f),g=o.getContext("2d");g.font=m;var M=g.measureText(e),x=Math.ceil(M.actualBoundingBoxRight+M.actualBoundingBoxLeft),b=Math.ceil(M.actualBoundingBoxAscent+M.actualBoundingBoxDescent),I=2,C=M.actualBoundingBoxLeft+I,p=M.actualBoundingBoxAscent+I;x+=I+I,b+=I+I,o=new OffscreenCanvas(x,b),g=o.getContext("2d"),g.font=m,g.fillStyle=l,g.fillText(e,C,p);var O=1/s;return{type:"bitmap",bitmap:o.transferToImageBitmap(),matrix:[O,0,0,O,-x*O/2,-b*O/2]}}a.exports=function(){return K().apply(this,arguments)},a.exports.reset=function(){K().reset()},a.exports.create=Y,a.exports.shapeFromPath=Ee,a.exports.shapeFromText=Le})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),J,!1);const ae=J.exports;J.exports.create;const Z=document.getElementById("grid"),ze=document.getElementById("score"),He=document.getElementById("best"),Ge=document.getElementById("best-name"),$=document.getElementById("game-over-modal"),Ue=document.getElementById("final-score"),X=document.getElementById("name-modal"),G=document.getElementById("player-name-input"),se=document.getElementById("start-game-btn"),_=document.getElementById("music-toggle"),ne=document.querySelectorAll(".diff-option"),E=new De;let oe="easy";const ie=["https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3"],R=new Audio;R.loop=!0;let A=!1;function le(){if(!A)return;const c=ie[Math.floor(Math.random()*ie.length)];R.src=c,R.play().catch(()=>{console.log("Auto-play blocked. User needs to interact first."),A=!1,ce()})}function ce(){_.innerText=A?"ðŸŽµ On":"ðŸŽµ Off",_.classList.toggle("off",!A)}_.addEventListener("click",()=>{A=!A,A?R.src?R.play():le():R.pause(),ce()});ne.forEach(c=>{c.addEventListener("click",()=>{ne.forEach(r=>r.classList.remove("active")),c.classList.add("active"),oe=c.getAttribute("data-value")})});function W(){const c=Z.clientWidth,r=c*.0375,a=(c-r*5)/4,d=a+r,u=new Set(E.getGrid().filter(i=>i!==null).map(i=>i.id));Z.querySelectorAll(".tile").forEach(i=>{const v=parseInt(i.id.split("-")[1]);u.has(v)||i.remove()}),E.getGrid().forEach((i,v)=>{if(!i)return;const L=Math.floor(v/4),y=v%4,S=r+L*d,n=r+y*d;let w=document.getElementById(`tile-${i.id}`);w||(w=document.createElement("div"),w.id=`tile-${i.id}`,w.classList.add("tile"),w.style.transition="none",w.style.width=`${a}px`,w.style.height=`${a}px`,w.style.transform=`translate(${n}px, ${S}px)`,Z.appendChild(w),w.offsetHeight,w.style.transition=""),w.innerText=i.value.toString(),w.className=`tile tile-${i.value}`;const U=i.value.toString().length;U>=4&&w.classList.add(`tile-digits-${U}`),i.isNew&&w.classList.add("tile-new"),i.isMerged&&w.classList.add("tile-merged"),w.style.width=`${a}px`,w.style.height=`${a}px`,w.style.transform=`translate(${n}px, ${S}px)`}),ze.innerText=E.getScore().toString(),He.innerText=E.getBestScore().toString(),Ge.innerText=E.getPlayerName(),E.isGameOver()?(Ue.innerText=E.getScore().toString(),$.classList.remove("hidden")):$.classList.add("hidden")}function $e(){return!$.classList.contains("hidden")||!X.classList.contains("hidden")}function D(c){E.isGameOver()||$e()||E.move(c)&&(W(),We())}function We(){const c=[1024,2048,4096,8192],r=E.getGrid(),a=E.getCelebratedTiles();for(const d of r)if(d&&c.includes(d.value)&&!a.has(d.value)){a.add(d.value),E.saveState(),je();break}}function je(){const r=Date.now()+3e3,a={startVelocity:30,spread:360,ticks:60,zIndex:0},d=(i,v)=>Math.random()*(v-i)+i,u=setInterval(function(){const i=r-Date.now();if(i<=0)return clearInterval(u);const v=50*(i/3e3);ae({...a,particleCount:v,origin:{x:d(.1,.3),y:Math.random()-.2}}),ae({...a,particleCount:v,origin:{x:d(.7,.9),y:Math.random()-.2}})},250)}window.resetGame=()=>{$.classList.add("hidden"),G.value=E.getPlayerName(),X.classList.remove("hidden"),G.focus()};se.addEventListener("click",()=>{const c=G.value.trim()||"Player";E.setPlayerName(c),X.classList.add("hidden"),E.init(!1,oe),A&&!R.src&&le(),W()});G.addEventListener("keydown",c=>{c.key==="Enter"&&se.click()});document.addEventListener("keydown",c=>{document.activeElement!==G&&(c.key==="ArrowLeft"&&D("left"),c.key==="ArrowRight"&&D("right"),c.key==="ArrowUp"&&D("up"),c.key==="ArrowDown"&&D("down"),c.altKey&&c.key.toLowerCase()==="n"&&(c.preventDefault(),window.resetGame()))});let z,H;const de=(c,r)=>{if(z===null||H===null)return;const a=c-z,d=r-H,u=30;Math.abs(a)>Math.abs(d)?Math.abs(a)>u&&D(a>0?"right":"left"):Math.abs(d)>u&&D(d>0?"down":"up"),z=H=null};document.addEventListener("touchstart",c=>{z=c.touches[0].clientX,H=c.touches[0].clientY},{passive:!0});document.addEventListener("touchend",c=>de(c.changedTouches[0].clientX,c.changedTouches[0].clientY),{passive:!0});document.addEventListener("mousedown",c=>{z=c.clientX,H=c.clientY});document.addEventListener("mouseup",c=>de(c.clientX,c.clientY));window.addEventListener("resize",W);E.init();W();

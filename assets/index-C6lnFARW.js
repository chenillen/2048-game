(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))d(h);new MutationObserver(h=>{for(const n of h)if(n.type==="childList")for(const S of n.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&d(S)}).observe(document,{childList:!0,subtree:!0});function a(h){const n={};return h.integrity&&(n.integrity=h.integrity),h.referrerPolicy&&(n.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?n.credentials="include":h.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(h){if(h.ep)return;h.ep=!0;const n=a(h);fetch(h.href,n)}})();class Be{grid=Array(16).fill(null);score=0;bestScore=0;playerName="Player";tileCounter=0;celebratedTiles=new Set;difficulty="easy";history=[];constructor(){this.loadScores()}loadScores(){const r=localStorage.getItem("2048-best-score");if(r){const a=JSON.parse(r);this.bestScore=a.score,this.playerName=a.name}}saveScores(){localStorage.setItem("2048-best-score",JSON.stringify({score:this.bestScore,name:this.playerName}))}saveState(){const r=JSON.stringify({grid:this.grid,score:this.score,tileCounter:this.tileCounter,celebratedTiles:Array.from(this.celebratedTiles),isOver:this.isGameOver(),difficulty:this.difficulty});localStorage.setItem("2048-game-state",r)}loadState(){const r=localStorage.getItem("2048-game-state");if(r){const a=JSON.parse(r);return a.isOver?(localStorage.removeItem("2048-game-state"),!1):(this.grid=a.grid,this.score=a.score,this.tileCounter=a.tileCounter,this.celebratedTiles=new Set(a.celebratedTiles||[]),this.difficulty=a.difficulty||"easy",!0)}return!1}init(r=!0,a){r&&this.loadState()||(a&&(this.difficulty=a),this.reset())}reset(){this.grid=Array(16).fill(null),this.score=0,this.celebratedTiles=new Set,this.history=[],this.addTile(),this.addTile(),this.saveState()}addTile(){const r=this.grid.map((a,d)=>a===null?d:null).filter(a=>a!==null);if(r.length>0){const a=r[Math.floor(Math.random()*r.length)],d=Math.max(...this.grid.map(n=>n?n.value:0));let h=2;if(this.difficulty==="easy"){const n=[2,4,8];d>=128&&n.push(16),h=n[Math.floor(Math.random()*n.length)]}else if(d>=16){const n=Math.log2(d)-2,S=[];for(let M=1;M<=n;M++){const E=Math.max(1,Math.floor(200/Math.pow(2,M)));for(let p=0;p<E;p++)S.push(M)}const O=S[Math.floor(Math.random()*S.length)];h=Math.pow(2,O)}else h=Math.random()<.9?2:4;this.grid[a]={value:h,id:this.tileCounter++,isNew:!0,isMerged:!1}}}undo(){if(this.history.length===0)return!1;const r=this.history.pop(),a=JSON.parse(r);return this.grid=a.grid,this.score=a.score,this.tileCounter=a.tileCounter,this.celebratedTiles=new Set(a.celebratedTiles),this.saveState(),!0}isGameOver(){if(this.grid.some(a=>a===null))return!1;const r=4;for(let a=0;a<r;a++)for(let d=0;d<r;d++){const h=this.grid[a*r+d].value;if(d<r-1&&h===this.grid[a*r+d+1].value||a<r-1&&h===this.grid[(a+1)*r+d].value)return!1}return!0}move(r){const a=JSON.stringify({grid:this.grid.map(M=>M?{...M}:null),score:this.score,tileCounter:this.tileCounter,celebratedTiles:Array.from(this.celebratedTiles)});let d=!1,h=!1;const n=4;let S=Array(16).fill(null);const O=(M,E)=>M*n+E;if(r==="left"||r==="right")for(let M=0;M<n;M++){let E=[];for(let i=0;i<n;i++)E.push(this.grid[O(M,i)]);r==="right"&&E.reverse();let p=E.filter(i=>i!==null),u=[];for(let i=0;i<p.length;i++)if(i<p.length-1&&p[i].value===p[i+1].value){const B=p[i].value*2;u.push({value:B,id:p[i].id,isNew:!1,isMerged:!0}),this.score+=B,i++,d=!0,h=!0}else p[i].isNew=!1,p[i].isMerged=!1,u.push(p[i]);for(;u.length<n;)u.push(null);r==="right"&&u.reverse();for(let i=0;i<n;i++)this.grid[O(M,i)]?.id!==u[i]?.id&&(d=!0),S[O(M,i)]=u[i]}else for(let M=0;M<n;M++){let E=[];for(let i=0;i<n;i++)E.push(this.grid[O(i,M)]);r==="down"&&E.reverse();let p=E.filter(i=>i!==null),u=[];for(let i=0;i<p.length;i++)if(i<p.length-1&&p[i].value===p[i+1].value){const B=p[i].value*2;u.push({value:B,id:p[i].id,isNew:!1,isMerged:!0}),this.score+=B,i++,d=!0,h=!0}else p[i].isNew=!1,p[i].isMerged=!1,u.push(p[i]);for(;u.length<n;)u.push(null);r==="down"&&u.reverse();for(let i=0;i<n;i++)this.grid[O(i,M)]?.id!==u[i]?.id&&(d=!0),S[O(i,M)]=u[i]}return d&&(this.history.push(a),this.history.length>20&&this.history.shift(),this.grid=S,this.addTile(),this.score>this.bestScore&&(this.bestScore=this.score,this.saveScores()),this.saveState()),{moved:d,merged:h}}getGrid(){return this.grid}getScore(){return this.score}getBestScore(){return this.bestScore}getPlayerName(){return this.playerName}getCelebratedTiles(){return this.celebratedTiles}getDifficulty(){return this.difficulty}canUndo(){return this.history.length>0}setPlayerName(r){this.playerName=r,this.saveScores()}}var H={};(function o(r,a,d,h){var n=!!(r.Worker&&r.Blob&&r.Promise&&r.OffscreenCanvas&&r.OffscreenCanvasRenderingContext2D&&r.HTMLCanvasElement&&r.HTMLCanvasElement.prototype.transferControlToOffscreen&&r.URL&&r.URL.createObjectURL),S=typeof Path2D=="function"&&typeof DOMMatrix=="function",O=(function(){if(!r.OffscreenCanvas)return!1;try{var t=new OffscreenCanvas(1,1),e=t.getContext("2d");e.fillRect(0,0,1,1);var s=t.transferToImageBitmap();e.createPattern(s,"no-repeat")}catch{return!1}return!0})();function M(){}function E(t){var e=a.exports.Promise,s=e!==void 0?e:r.Promise;return typeof s=="function"?new s(t):(t(M,M),null)}var p=(function(t,e){return{transform:function(s){if(t)return s;if(e.has(s))return e.get(s);var c=new OffscreenCanvas(s.width,s.height),f=c.getContext("2d");return f.drawImage(s,0,0),e.set(s,c),c},clear:function(){e.clear()}}})(O,new Map),u=(function(){var t=Math.floor(16.666666666666668),e,s,c={},f=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(m){var g=Math.random();return c[g]=requestAnimationFrame(function l(v){f===v||f+t-1<v?(f=v,delete c[g],m()):c[g]=requestAnimationFrame(l)}),g},s=function(m){c[m]&&cancelAnimationFrame(c[m])}):(e=function(m){return setTimeout(m,t)},s=function(m){return clearTimeout(m)}),{frame:e,cancel:s}})(),i=(function(){var t,e,s={};function c(f){function m(g,l){f.postMessage({options:g||{},callback:l})}f.init=function(l){var v=l.transferControlToOffscreen();f.postMessage({canvas:v},[v])},f.fire=function(l,v,w){if(e)return m(l,null),e;var C=Math.random().toString(36).slice(2);return e=E(function(b){function I(L){L.data.callback===C&&(delete s[C],f.removeEventListener("message",I),e=null,p.clear(),w(),b())}f.addEventListener("message",I),m(l,C),s[C]=I.bind(null,{data:{callback:C}})}),e},f.reset=function(){f.postMessage({reset:!0});for(var l in s)s[l](),delete s[l]}}return function(){if(t)return t;if(!d&&n){var f=["var CONFETTI, SIZE = {}, module = {};","("+o.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{t=new Worker(URL.createObjectURL(new Blob([f])))}catch(m){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",m),null}c(t)}return t}})(),B={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function j(t,e){return e?e(t):t}function ce(t){return t!=null}function T(t,e,s){return j(t&&ce(t[e])?t[e]:B[e],s)}function de(t){return t<0?0:Math.floor(t)}function ue(t,e){return Math.floor(Math.random()*(e-t))+t}function q(t){return parseInt(t,16)}function he(t){return t.map(fe)}function fe(t){var e=String(t).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:q(e.substring(0,2)),g:q(e.substring(2,4)),b:q(e.substring(4,6))}}function me(t){var e=T(t,"origin",Object);return e.x=T(e,"x",Number),e.y=T(e,"y",Number),e}function ge(t){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight}function ve(t){var e=t.getBoundingClientRect();t.width=e.width,t.height=e.height}function ye(t){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=t,e}function pe(t,e,s,c,f,m,g,l,v){t.save(),t.translate(e,s),t.rotate(m),t.scale(c,f),t.arc(0,0,1,g,l,v),t.restore()}function Me(t){var e=t.angle*(Math.PI/180),s=t.spread*(Math.PI/180);return{x:t.x,y:t.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:t.startVelocity*.5+Math.random()*t.startVelocity,angle2D:-e+(.5*s-Math.random()*s),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:t.color,shape:t.shape,tick:0,totalTicks:t.ticks,decay:t.decay,drift:t.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:t.gravity*3,ovalScalar:.6,scalar:t.scalar,flat:t.flat}}function we(t,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var s=e.tick++/e.totalTicks,c=e.x+e.random*e.tiltCos,f=e.y+e.random*e.tiltSin,m=e.wobbleX+e.random*e.tiltCos,g=e.wobbleY+e.random*e.tiltSin;if(t.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-s)+")",t.beginPath(),S&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))t.fill(Se(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(m-c)*.1,Math.abs(g-f)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var l=Math.PI/10*e.wobble,v=Math.abs(m-c)*.1,w=Math.abs(g-f)*.1,C=e.shape.bitmap.width*e.scalar,b=e.shape.bitmap.height*e.scalar,I=new DOMMatrix([Math.cos(l)*v,Math.sin(l)*v,-Math.sin(l)*w,Math.cos(l)*w,e.x,e.y]);I.multiplySelf(new DOMMatrix(e.shape.matrix));var L=t.createPattern(p.transform(e.shape.bitmap),"no-repeat");L.setTransform(I),t.globalAlpha=1-s,t.fillStyle=L,t.fillRect(e.x-C/2,e.y-b/2,C,b),t.globalAlpha=1}else if(e.shape==="circle")t.ellipse?t.ellipse(e.x,e.y,Math.abs(m-c)*e.ovalScalar,Math.abs(g-f)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):pe(t,e.x,e.y,Math.abs(m-c)*e.ovalScalar,Math.abs(g-f)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var y=Math.PI/2*3,P=4*e.scalar,N=8*e.scalar,k=e.x,F=e.y,R=5,A=Math.PI/R;R--;)k=e.x+Math.cos(y)*N,F=e.y+Math.sin(y)*N,t.lineTo(k,F),y+=A,k=e.x+Math.cos(y)*P,F=e.y+Math.sin(y)*P,t.lineTo(k,F),y+=A;else t.moveTo(Math.floor(e.x),Math.floor(e.y)),t.lineTo(Math.floor(e.wobbleX),Math.floor(f)),t.lineTo(Math.floor(m),Math.floor(g)),t.lineTo(Math.floor(c),Math.floor(e.wobbleY));return t.closePath(),t.fill(),e.tick<e.totalTicks}function be(t,e,s,c,f){var m=e.slice(),g=t.getContext("2d"),l,v,w=E(function(C){function b(){l=v=null,g.clearRect(0,0,c.width,c.height),p.clear(),f(),C()}function I(){d&&!(c.width===h.width&&c.height===h.height)&&(c.width=t.width=h.width,c.height=t.height=h.height),!c.width&&!c.height&&(s(t),c.width=t.width,c.height=t.height),g.clearRect(0,0,c.width,c.height),m=m.filter(function(L){return we(g,L)}),m.length?l=u.frame(I):b()}l=u.frame(I),v=b});return{addFettis:function(C){return m=m.concat(C),w},canvas:t,promise:w,reset:function(){l&&u.cancel(l),v&&v()}}}function K(t,e){var s=!t,c=!!T(e||{},"resize"),f=!1,m=T(e,"disableForReducedMotion",Boolean),g=n&&!!T(e||{},"useWorker"),l=g?i():null,v=s?ge:ve,w=t&&l?!!t.__confetti_initialized:!1,C=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,b;function I(y,P,N){for(var k=T(y,"particleCount",de),F=T(y,"angle",Number),R=T(y,"spread",Number),A=T(y,"startVelocity",Number),Te=T(y,"decay",Number),Ee=T(y,"gravity",Number),xe=T(y,"drift",Number),ee=T(y,"colors",he),Le=T(y,"ticks",Number),te=T(y,"shapes"),Pe=T(y,"scalar"),Oe=!!T(y,"flat"),re=me(y),ae=k,J=[],Ne=t.width*re.x,ke=t.height*re.y;ae--;)J.push(Me({x:Ne,y:ke,angle:F,spread:R,startVelocity:A,color:ee[ae%ee.length],shape:te[ue(0,te.length)],ticks:Le,decay:Te,gravity:Ee,drift:xe,scalar:Pe,flat:Oe}));return b?b.addFettis(J):(b=be(t,J,v,P,N),b.promise)}function L(y){var P=m||T(y,"disableForReducedMotion",Boolean),N=T(y,"zIndex",Number);if(P&&C)return E(function(A){A()});s&&b?t=b.canvas:s&&!t&&(t=ye(N),document.body.appendChild(t)),c&&!w&&v(t);var k={width:t.width,height:t.height};l&&!w&&l.init(t),w=!0,l&&(t.__confetti_initialized=!0);function F(){if(l){var A={getBoundingClientRect:function(){if(!s)return t.getBoundingClientRect()}};v(A),l.postMessage({resize:{width:A.width,height:A.height}});return}k.width=k.height=null}function R(){b=null,c&&(f=!1,r.removeEventListener("resize",F)),s&&t&&(document.body.contains(t)&&document.body.removeChild(t),t=null,w=!1)}return c&&!f&&(f=!0,r.addEventListener("resize",F,!1)),l?l.fire(y,k,R):I(y,k,R)}return L.reset=function(){l&&l.reset(),b&&b.reset()},L}var _;function Q(){return _||(_=K(null,{useWorker:!0,resize:!0})),_}function Se(t,e,s,c,f,m,g){var l=new Path2D(t),v=new Path2D;v.addPath(l,new DOMMatrix(e));var w=new Path2D;return w.addPath(v,new DOMMatrix([Math.cos(g)*f,Math.sin(g)*f,-Math.sin(g)*m,Math.cos(g)*m,s,c])),w}function Ce(t){if(!S)throw new Error("path confetti are not supported in this browser");var e,s;typeof t=="string"?e=t:(e=t.path,s=t.matrix);var c=new Path2D(e),f=document.createElement("canvas"),m=f.getContext("2d");if(!s){for(var g=1e3,l=g,v=g,w=0,C=0,b,I,L=0;L<g;L+=2)for(var y=0;y<g;y+=2)m.isPointInPath(c,L,y,"nonzero")&&(l=Math.min(l,L),v=Math.min(v,y),w=Math.max(w,L),C=Math.max(C,y));b=w-l,I=C-v;var P=10,N=Math.min(P/b,P/I);s=[N,0,0,N,-Math.round(b/2+l)*N,-Math.round(I/2+v)*N]}return{type:"path",path:e,matrix:s}}function Ie(t){var e,s=1,c="#000000",f='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof t=="string"?e=t:(e=t.text,s="scalar"in t?t.scalar:s,f="fontFamily"in t?t.fontFamily:f,c="color"in t?t.color:c);var m=10*s,g=""+m+"px "+f,l=new OffscreenCanvas(m,m),v=l.getContext("2d");v.font=g;var w=v.measureText(e),C=Math.ceil(w.actualBoundingBoxRight+w.actualBoundingBoxLeft),b=Math.ceil(w.actualBoundingBoxAscent+w.actualBoundingBoxDescent),I=2,L=w.actualBoundingBoxLeft+I,y=w.actualBoundingBoxAscent+I;C+=I+I,b+=I+I,l=new OffscreenCanvas(C,b),v=l.getContext("2d"),v.font=g,v.fillStyle=c,v.fillText(e,L,y);var P=1/s;return{type:"bitmap",bitmap:l.transferToImageBitmap(),matrix:[P,0,0,P,-C*P/2,-b*P/2]}}a.exports=function(){return Q().apply(this,arguments)},a.exports.reset=function(){Q().reset()},a.exports.create=K,a.exports.shapeFromPath=Ce,a.exports.shapeFromText=Ie})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),H,!1);const ne=H.exports;H.exports.create;const Z=document.getElementById("grid"),Ae=document.getElementById("score"),Fe=document.getElementById("best"),Re=document.getElementById("best-name"),V=document.getElementById("game-over-modal"),De=document.getElementById("final-score"),X=document.getElementById("name-modal"),U=document.getElementById("player-name-input"),se=document.getElementById("start-game-btn"),Y=document.getElementById("undo-btn"),ie=document.querySelectorAll(".diff-option"),x=new Be;let oe="easy";const $={celebrate:new Audio("https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3"),click:new Audio("https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3")};ie.forEach(o=>{o.addEventListener("click",()=>{$.click.play(),ie.forEach(r=>r.classList.remove("active")),o.classList.add("active"),oe=o.getAttribute("data-value")})});function W(){const o=Z.clientWidth,r=o<=520?6:o*.0375,a=(o-r*5)/4,d=a+r,h=new Set(x.getGrid().filter(n=>n!==null).map(n=>n.id));Z.querySelectorAll(".tile").forEach(n=>{const S=parseInt(n.id.split("-")[1]);h.has(S)||n.remove()}),x.getGrid().forEach((n,S)=>{if(!n)return;const O=Math.floor(S/4),M=S%4,E=r+O*d,p=r+M*d;let u=document.getElementById(`tile-${n.id}`);if(!u){u=document.createElement("div"),u.id=`tile-${n.id}`,u.classList.add("tile"),u.style.transition="none",u.style.width=`${a}px`,u.style.height=`${a}px`,u.style.transform=`translate(${p}px, ${E}px)`;const j=document.createElement("div");j.classList.add("tile-inner"),u.appendChild(j),Z.appendChild(u),u.offsetHeight,u.style.transition=""}const i=u.querySelector(".tile-inner");i.innerText=n.value.toString(),u.className=`tile tile-${n.value}`;const B=n.value.toString().length;B>=3&&u.classList.add(`tile-digits-${B}`),n.isNew&&u.classList.add("tile-new"),n.isMerged&&u.classList.add("tile-merged"),u.style.width=`${a}px`,u.style.height=`${a}px`,u.style.transform=`translate(${p}px, ${E}px)`}),Ae.innerText=x.getScore().toString(),Fe.innerText=x.getBestScore().toString(),Re.innerText=x.getPlayerName(),Y.style.opacity=x.canUndo()?"1":"0.5",x.isGameOver()?(De.innerText=x.getScore().toString(),V.classList.remove("hidden")):V.classList.add("hidden")}function ze(){return!V.classList.contains("hidden")||!X.classList.contains("hidden")}function D(o){if(x.isGameOver()||ze())return;x.move(o).moved&&(W(),Ge())}function Ge(){const o=[1024,2048,4096,8192],r=x.getGrid(),a=x.getCelebratedTiles();for(const d of r)if(d&&o.includes(d.value)&&!a.has(d.value)){a.add(d.value),x.saveState(),Ue();break}}function Ue(){$.celebrate.play();const o=3*1e3,r=Date.now()+o,a={startVelocity:30,spread:360,ticks:60,zIndex:0},d=(n,S)=>Math.random()*(S-n)+n,h=setInterval(function(){const n=r-Date.now();if(n<=0)return clearInterval(h);const S=50*(n/o);ne({...a,particleCount:S,origin:{x:d(.1,.3),y:Math.random()-.2}}),ne({...a,particleCount:S,origin:{x:d(.7,.9),y:Math.random()-.2}})},250)}window.resetGame=()=>{$.click.play(),V.classList.add("hidden"),U.value=x.getPlayerName(),X.classList.remove("hidden"),U.focus()};se.addEventListener("click",()=>{$.click.play();const o=U.value.trim()||"Player";x.setPlayerName(o),X.classList.add("hidden"),x.init(!1,oe),W()});Y.addEventListener("click",()=>{x.undo()&&($.click.play(),W())});U.addEventListener("keydown",o=>{o.key==="Enter"&&se.click()});document.addEventListener("keydown",o=>{document.activeElement!==U&&(o.key==="ArrowLeft"&&D("left"),o.key==="ArrowRight"&&D("right"),o.key==="ArrowUp"&&D("up"),o.key==="ArrowDown"&&D("down"),o.altKey&&o.key.toLowerCase()==="n"&&(o.preventDefault(),window.resetGame()),o.altKey&&o.key.toLowerCase()==="z"&&(o.preventDefault(),Y.click()))});let z,G;const le=(o,r)=>{if(z===null||G===null)return;const a=o-z,d=r-G,h=30;Math.abs(a)>Math.abs(d)?Math.abs(a)>h&&D(a>0?"right":"left"):Math.abs(d)>h&&D(d>0?"down":"up"),z=G=null};document.addEventListener("touchstart",o=>{z=o.touches[0].clientX,G=o.touches[0].clientY},{passive:!0});document.addEventListener("touchend",o=>le(o.changedTouches[0].clientX,o.changedTouches[0].clientY),{passive:!0});document.addEventListener("mousedown",o=>{z=o.clientX,G=o.clientY});document.addEventListener("mouseup",o=>le(o.clientX,o.clientY));window.addEventListener("resize",W);x.init();W();

module.exports=[40777,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(1148),e=a.i(20031);function f(){let{theme:a}=(0,d.useTheme)(),{user:f,updateGameStats:g}=(0,e.useUser)(),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(0),[l,m]=(0,c.useState)(0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)("easy"),x=(0,c.useCallback)(()=>{let a=[,,,,].fill(null).map(()=>[,,,,].fill(null));y(a),y(a),i(a),k(0),o(!1),u([])},[]);(0,c.useEffect)(()=>{x()},[x]);let y=a=>{let b=[];for(let c=0;c<4;c++)for(let d=0;d<4;d++)a[c][d]||b.push({row:c,col:d});if(0===b.length)return;let{row:c,col:d}=b[Math.floor(Math.random()*b.length)],e="easy"===v?.9>Math.random()?2:4:.5>Math.random()?2:.8>Math.random()?4:8;a[c][d]={id:Date.now()+Math.random(),value:e,row:c,col:d,isNew:!0,isMerged:!1}},z=a=>a.map(a=>a.map(a=>a?{...a}:null)),A=a=>{if(n)return;u(a=>[...a,z(h)]);let b=z(h),c=!1,d=j,e=a=>a[0].map((b,c)=>a.map(a=>a[c]).reverse()),p=a=>{let b=a.filter(a=>null!==a);for(let a=0;a<b.length-1;a++)b[a].value===b[a+1].value&&(b[a].value*=2,b[a].isMerged=!0,d+=b[a].value,b.splice(a+1,1));for(;b.length<4;)b.push(null);return b};"right"===a?b=b.map(a=>p([...a].reverse()).reverse()):"left"===a?b=b.map(a=>p([...a])):"up"===a?(b=(b=e(b)).map(a=>p([...a])),b=e(e(e(b)))):"down"===a&&(b=(b=e(e(e(b)))).map(a=>p([...a])),b=e(b)),JSON.stringify(h)!==JSON.stringify(b)&&(c=!0),c?(y(b),i(b),k(d),d>l&&m(d),B(b)&&(o(!0),f&&g(d))):u(a=>a.slice(0,-1))},B=a=>{for(let b=0;b<4;b++)for(let c=0;c<4;c++)if(!a[b][c])return!1;for(let b=0;b<4;b++)for(let c=0;c<4;c++){let d=a[b][c].value;if(b<3&&a[b+1][c].value===d||c<3&&a[b][c+1].value===d)return!1}return!0},C=(0,c.useCallback)(a=>{p||("ArrowLeft"===a.key?A("left"):"ArrowRight"===a.key?A("right"):"ArrowUp"===a.key?A("up"):"ArrowDown"===a.key&&A("down"))},[h,n,p]);(0,c.useEffect)(()=>(window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)),[C]);let[D,E]=(0,c.useState)(null),F=()=>{q(!1),x()};return(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",height:"100vh",padding:"10px",backgroundColor:a.colors.background,color:a.colors.textColor,transition:"background-color 0.3s, color 0.3s",overflow:"hidden",boxSizing:"border-box"},children:[(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",maxWidth:"360px",marginBottom:"10px"},children:(0,b.jsx)("h1",{style:{fontSize:"42px",fontWeight:"bold",color:a.colors.textColor,margin:0},children:"4096"})}),(0,b.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[(0,b.jsxs)("div",{style:{backgroundColor:a.colors.tileBorder,padding:"8px 16px",borderRadius:"6px",textAlign:"center",minWidth:"70px"},children:[(0,b.jsx)("div",{style:{fontSize:"11px",color:"#eee4da"},children:"SCORE"}),(0,b.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#fff"},children:j})]}),(0,b.jsxs)("div",{style:{backgroundColor:a.colors.tileBorder,padding:"8px 16px",borderRadius:"6px",textAlign:"center",minWidth:"70px"},children:[(0,b.jsx)("div",{style:{fontSize:"11px",color:"#eee4da"},children:"BEST"}),(0,b.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#fff"},children:l})]})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[(0,b.jsx)("button",{onClick:()=>w("easy"===v?"hard":"easy"),style:{padding:"6px 12px",backgroundColor:a.colors.tileBackground,color:a.colors.textColor,borderRadius:"6px",fontSize:"13px",border:"none"},children:"easy"===v?"Easy":"Hard"}),(0,b.jsx)("button",{onClick:()=>{0===t.length||(i(z(t[t.length-1])),u(a=>a.slice(0,-1)))},disabled:0===t.length,style:{padding:"6px 12px",backgroundColor:a.colors.tileBackground,color:a.colors.textColor,borderRadius:"6px",fontSize:"13px",border:"none",opacity:0===t.length?.5:1},children:"â†© Undo"}),(0,b.jsx)("button",{onClick:()=>{q(!0)},style:{padding:"6px 12px",backgroundColor:a.colors.textColor,color:"#fff",borderRadius:"6px",fontSize:"13px",border:"none"},children:"New Game"})]}),(0,b.jsx)("div",{onTouchStart:a=>{E({x:a.touches[0].clientX,y:a.touches[0].clientY})},onTouchEnd:a=>{if(!D||p||n)return;let b={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY},c=b.x-D.x,d=b.y-D.y;Math.abs(c)>Math.abs(d)?Math.abs(c)>50&&A(c>0?"left":"right"):Math.abs(d)>50&&A(d<0?"down":"up"),E(null)},style:{backgroundColor:a.colors.tileBorder,padding:"8px",borderRadius:"6px",display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gridTemplateRows:"repeat(4, 1fr)",gap:"8px",width:"min(85vw, 340px)",height:"min(85vw, 340px)",maxWidth:"340px",maxHeight:"340px",touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},children:h.map((c,d)=>c.map((c,e)=>(0,b.jsx)("div",{style:{backgroundColor:c?({2:"var(--tile-2)",4:"var(--tile-4)",8:"var(--tile-8)",16:"var(--tile-16)",32:"var(--tile-32)",64:"var(--tile-64)",128:"var(--tile-128)",256:"var(--tile-256)",512:"var(--tile-512)",1024:"var(--tile-1024)",2048:"var(--tile-2048)",4096:"var(--tile-4096)"})[c.value]||"#3c3a32":a.colors.tileBackground,borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:c&&c.value>100?"min(5vw, 22px)":"min(7vw, 28px)",fontWeight:"bold",color:c?c.value<=4?"#776e65":"#f9f6f2":"transparent",transition:"all 0.15s ease-in-out",aspectRatio:"1",width:"100%",height:"100%"},children:c?.value},`${d}-${e}`)))}),n&&(0,b.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",zIndex:100},children:[(0,b.jsx)("h2",{style:{color:"#fff",fontSize:"36px",marginBottom:"15px"},children:"Game Over!"}),(0,b.jsxs)("p",{style:{color:"#fff",fontSize:"20px",marginBottom:"20px"},children:["Score: ",j]}),(0,b.jsx)("button",{onClick:x,style:{padding:"12px 24px",backgroundColor:a.colors.textColor,color:"#fff",borderRadius:"6px",fontSize:"16px",border:"none"},children:"Play Again"})]}),p&&(0,b.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",zIndex:100},children:(0,b.jsxs)("div",{style:{backgroundColor:a.colors.background,padding:"25px",borderRadius:"8px",textAlign:"center",maxWidth:"300px",width:"90%"},children:[(0,b.jsx)("h2",{style:{marginBottom:"15px",color:a.colors.textColor,fontSize:"24px"},children:"Enter Your Name"}),(0,b.jsx)("input",{type:"text",value:r,onChange:a=>s(a.target.value),placeholder:"Your name",style:{padding:"10px",fontSize:"16px",borderRadius:"6px",border:`1px solid ${a.colors.tileBorder}`,marginBottom:"15px",width:"100%",textAlign:"center",backgroundColor:a.colors.tileBackground,color:a.colors.textColor},onKeyDown:a=>"Enter"===a.key&&F()}),(0,b.jsx)("button",{onClick:F,style:{padding:"10px 24px",backgroundColor:a.colors.textColor,color:"#fff",borderRadius:"6px",fontSize:"16px",border:"none",width:"100%"},children:"Start Game"})]})})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=src_app_page_tsx_a7111f3e._.js.map
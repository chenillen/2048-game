(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";var t=e.i(43476),o=e.i(71645),r=e.i(27423),l=e.i(46498);function n(){let{theme:e}=(0,r.useTheme)(),{user:n,updateGameStats:i}=(0,l.useUser)(),[a,d]=(0,o.useState)([]),[s,c]=(0,o.useState)(0),[x,p]=(0,o.useState)(0),[u,f]=(0,o.useState)(!1),[h,g]=(0,o.useState)(!1),[m,y]=(0,o.useState)(""),[b,v]=(0,o.useState)([]),[C,k]=(0,o.useState)("easy"),S=(0,o.useCallback)(()=>{let e=[,,,,].fill(null).map(()=>[,,,,].fill(null));j(e),j(e),d(e),c(0),f(!1),v([])},[]);(0,o.useEffect)(()=>{S()},[S]);let j=e=>{let t=[];for(let o=0;o<4;o++)for(let r=0;r<4;r++)e[o][r]||t.push({row:o,col:r});if(0===t.length)return;let{row:o,col:r}=t[Math.floor(Math.random()*t.length)],l="easy"===C?.9>Math.random()?2:4:.5>Math.random()?2:.8>Math.random()?4:8;e[o][r]={id:Date.now()+Math.random(),value:l,row:o,col:r,isNew:!0,isMerged:!1}},w=e=>e.map(e=>e.map(e=>e?{...e}:null)),z=e=>{if(u)return;v(e=>[...e,w(a)]);let t=w(a),o=!1,r=s,l=e=>e[0].map((t,o)=>e.map(e=>e[o]).reverse()),h=e=>{let t=e.filter(e=>null!==e);for(let e=0;e<t.length-1;e++)t[e].value===t[e+1].value&&(t[e].value*=2,t[e].isMerged=!0,r+=t[e].value,t.splice(e+1,1));for(;t.length<4;)t.push(null);return t};"right"===e?t=t.map(e=>h([...e].reverse()).reverse()):"left"===e?t=t.map(e=>h([...e])):"up"===e?(t=(t=l(t)).map(e=>h([...e])),t=l(l(l(t)))):"down"===e&&(t=(t=l(l(l(t)))).map(e=>h([...e])),t=l(t)),JSON.stringify(a)!==JSON.stringify(t)&&(o=!0),o?(j(t),d(t),c(r),r>x&&p(r),B(t)&&(f(!0),n&&i(r))):v(e=>e.slice(0,-1))},B=e=>{for(let t=0;t<4;t++)for(let o=0;o<4;o++)if(!e[t][o])return!1;for(let t=0;t<4;t++)for(let o=0;o<4;o++){let r=e[t][o].value;if(t<3&&e[t+1][o].value===r||o<3&&e[t][o+1].value===r)return!1}return!0},R=(0,o.useCallback)(e=>{h||("ArrowLeft"===e.key?z("left"):"ArrowRight"===e.key?z("right"):"ArrowUp"===e.key?z("up"):"ArrowDown"===e.key&&z("down"))},[a,u,h]);(0,o.useEffect)(()=>(window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)),[R]);let[A,M]=(0,o.useState)(null),T=()=>{g(!1),S()};return(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",height:"100vh",padding:"10px",backgroundColor:e.colors.background,color:e.colors.textColor,transition:"background-color 0.3s, color 0.3s",overflow:"hidden",boxSizing:"border-box"},children:[(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",maxWidth:"360px",marginBottom:"10px"},children:(0,t.jsx)("h1",{style:{fontSize:"42px",fontWeight:"bold",color:e.colors.textColor,margin:0},children:"4096"})}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[(0,t.jsxs)("div",{style:{backgroundColor:e.colors.tileBorder,padding:"8px 16px",borderRadius:"6px",textAlign:"center",minWidth:"70px"},children:[(0,t.jsx)("div",{style:{fontSize:"11px",color:"#eee4da"},children:"SCORE"}),(0,t.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#fff"},children:s})]}),(0,t.jsxs)("div",{style:{backgroundColor:e.colors.tileBorder,padding:"8px 16px",borderRadius:"6px",textAlign:"center",minWidth:"70px"},children:[(0,t.jsx)("div",{style:{fontSize:"11px",color:"#eee4da"},children:"BEST"}),(0,t.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#fff"},children:x})]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[(0,t.jsx)("button",{onClick:()=>k("easy"===C?"hard":"easy"),style:{padding:"6px 12px",backgroundColor:e.colors.tileBackground,color:e.colors.textColor,borderRadius:"6px",fontSize:"13px",border:"none"},children:"easy"===C?"Easy":"Hard"}),(0,t.jsx)("button",{onClick:()=>{0===b.length||(d(w(b[b.length-1])),v(e=>e.slice(0,-1)))},disabled:0===b.length,style:{padding:"6px 12px",backgroundColor:e.colors.tileBackground,color:e.colors.textColor,borderRadius:"6px",fontSize:"13px",border:"none",opacity:0===b.length?.5:1},children:"â†© Undo"}),(0,t.jsx)("button",{onClick:()=>{g(!0)},style:{padding:"6px 12px",backgroundColor:e.colors.textColor,color:"#fff",borderRadius:"6px",fontSize:"13px",border:"none"},children:"New Game"})]}),(0,t.jsx)("div",{onTouchStart:e=>{M({x:e.touches[0].clientX,y:e.touches[0].clientY})},onTouchEnd:e=>{if(!A||h||u)return;let t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},o=t.x-A.x,r=t.y-A.y;Math.abs(o)>Math.abs(r)?Math.abs(o)>50&&z(o>0?"right":"left"):Math.abs(r)>50&&z(r>0?"down":"up"),M(null)},style:{backgroundColor:e.colors.tileBorder,padding:"8px",borderRadius:"6px",display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gridTemplateRows:"repeat(4, 1fr)",gap:"8px",width:"min(85vw, 340px)",height:"min(85vw, 340px)",maxWidth:"340px",maxHeight:"340px",touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},children:a.map((o,r)=>o.map((o,l)=>(0,t.jsx)("div",{style:{backgroundColor:o?({2:"var(--tile-2)",4:"var(--tile-4)",8:"var(--tile-8)",16:"var(--tile-16)",32:"var(--tile-32)",64:"var(--tile-64)",128:"var(--tile-128)",256:"var(--tile-256)",512:"var(--tile-512)",1024:"var(--tile-1024)",2048:"var(--tile-2048)",4096:"var(--tile-4096)"})[o.value]||"#3c3a32":e.colors.tileBackground,borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:o&&o.value>100?"min(5vw, 22px)":"min(7vw, 28px)",fontWeight:"bold",color:o?o.value<=4?"#776e65":"#f9f6f2":"transparent",transition:"all 0.15s ease-in-out",aspectRatio:"1",width:"100%",height:"100%"},children:o?.value},`${r}-${l}`)))}),u&&(0,t.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",zIndex:100},children:[(0,t.jsx)("h2",{style:{color:"#fff",fontSize:"36px",marginBottom:"15px"},children:"Game Over!"}),(0,t.jsxs)("p",{style:{color:"#fff",fontSize:"20px",marginBottom:"20px"},children:["Score: ",s]}),(0,t.jsx)("button",{onClick:S,style:{padding:"12px 24px",backgroundColor:e.colors.textColor,color:"#fff",borderRadius:"6px",fontSize:"16px",border:"none"},children:"Play Again"})]}),h&&(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",zIndex:100},children:(0,t.jsxs)("div",{style:{backgroundColor:e.colors.background,padding:"25px",borderRadius:"8px",textAlign:"center",maxWidth:"300px",width:"90%"},children:[(0,t.jsx)("h2",{style:{marginBottom:"15px",color:e.colors.textColor,fontSize:"24px"},children:"Enter Your Name"}),(0,t.jsx)("input",{type:"text",value:m,onChange:e=>y(e.target.value),placeholder:"Your name",style:{padding:"10px",fontSize:"16px",borderRadius:"6px",border:`1px solid ${e.colors.tileBorder}`,marginBottom:"15px",width:"100%",textAlign:"center",backgroundColor:e.colors.tileBackground,color:e.colors.textColor},onKeyDown:e=>"Enter"===e.key&&T()}),(0,t.jsx)("button",{onClick:T,style:{padding:"10px 24px",backgroundColor:e.colors.textColor,color:"#fff",borderRadius:"6px",fontSize:"16px",border:"none",width:"100%"},children:"Start Game"})]})})]})}e.s(["default",()=>n])}]);